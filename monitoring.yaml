# Monitoring Configuration for [PROJECT_NAME]
# This file defines how Grafana dashboards and Prometheus alerts are generated
# See: ../workspace-config/monitoring/README.md for documentation
#
# Dashboard will be auto-generated by CI when this file changes
# Generated dashboards are stored in: pi-fleet/helm/monitoring-stack/dashboards/

app:
  # Application name (used for dashboard titles, alert names)
  name: "[PROJECT_NAME]"

  # Kubernetes namespace where the app is deployed
  namespace: "[project-name]"

  # Dashboard template type: web-service | gpu-worker | static-website
  type: web-service

  # Components to monitor
  # Each component generates status panels and relevant metrics
  components:
    # API component (FastAPI, Express, etc.)
    api:
      service: "[project-name]-api"
      port: 8000
      # Enable /metrics endpoint scraping (requires prometheus instrumentation)
      metrics: false

    # Web frontend component (Next.js, React, etc.)
    web:
      service: "[project-name]-web"
      port: 3000

    # PostgreSQL database (optional)
    postgres:
      service: "[project-name]-postgres"
      port: 5432

    # Redis cache/queue (optional)
    redis:
      service: "[project-name]-redis"
      port: 6379

    # MinIO/S3 object storage (optional, mainly for gpu-worker type)
    # minio:
    #   service: "[project-name]-minio"
    #   port: 9000

  # Alert thresholds (optional - defaults shown)
  alerts:
    # CPU usage threshold (percentage)
    cpu_threshold: 85
    # Memory usage threshold (percentage)
    memory_threshold: 90
    # Enable alerting for this app
    enabled: true
    # Alert severity for critical issues: critical | warning
    severity: warning

  # External worker configuration (for gpu-worker type only)
  # external_worker:
  #   enabled: true
  #   job_name: "[project-name]-worker"
  #   pushgateway: pushgateway.eldertree.local

# Additional custom panels (advanced usage)
# custom_panels:
#   - title: "Custom Metric"
#     type: stat
#     query: "my_custom_metric_total"
#     unit: none
